#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path(File.join(File.dirname(__FILE__),".." , "lib")))
require 'ruby_logic'

user_input = gets.chomp
parser = Parser.new(user_input)
program = parser.program
interpreter = Interpreter.new(program, parser.truth_table)
def pretty_print(program)
  if !program.nil?
    case program.type
    when :program
      program.left.each do |clause|
        puts "Type: #{clause.type}"
        pretty_print(clause)
        puts
      end
    when :statement
      pretty_print(program.left)
    when :declaration
      pretty_print(program.left)
    when :terminal
      print "#{program.left} "
    when :parens || :not || :negation
      print "\[#{program.type} "
      pretty_print(program.left)
    else
      print "\[#{program.type} "
      pretty_print(program.left)
      pretty_print(program.right)
      print "\]"
    end
  end
end
print program.left
puts "Validity: #{interpreter.validity?}"
puts "Truth Table: #{interpreter.truth_table}"
pretty_print(program)
